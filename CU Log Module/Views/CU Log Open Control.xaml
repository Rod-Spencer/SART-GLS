<UserControl x:Class="Segway.Modules.CU_Log_Module.CU_Log_Open_Control"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:wpfres="clr-namespace:Segway.WPFResources;assembly=WPFResources"
             xmlns:PresentationOptions="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"
             xmlns:shared="http://schemas.actiprosoftware.com/winfx/xaml/shared"
             xmlns:local="clr-namespace:Segway.Modules.CU_Log_Module"
             xmlns:themes="http://schemas.actiprosoftware.com/winfx/xaml/themes"
             xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:header="http://service.segway.com/schemas/Header/"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             KeyboardNavigation.TabNavigation="Local" KeyboardNavigation.ControlTabNavigation="Local"
             VerticalAlignment="Stretch"
             >

    <UserControl.Resources>

    </UserControl.Resources>


    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="1*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <header:Header_Bar_Control Grid.Row="0" HeaderText="Open Event Log" Header_FontSize="16" Header_ImageSource="{Binding Header_Image}" />
        <!--<Border Grid.Row="0" Background="{DynamicResource {ComponentResourceKey ResourceId=ToolBar_ItemBrush1, TypeInTargetAssembly={x:Type wpfres:Brushes}}}" BorderBrush="DarkGray" BorderThickness="0,0,0,1.5">
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>
                <Rectangle Grid.ColumnSpan="2" Height="16" Fill="Snow" Opacity="0.5" VerticalAlignment="Top"/>
                <Image Grid.Column="0" Source="../Images/open.png" Height="25" Width="25" Margin="5">
                    <Image.Effect>
                        <DropShadowEffect Opacity="0.4" BlurRadius="4"/>
                    </Image.Effect>
                </Image>
                <TextBlock Grid.Column="1" Text="Open Event Log" Foreground="Black" FontSize="16" Opacity="0.65" Margin="0,5,0,5" FontFamily="Tahoma" VerticalAlignment="Center" HorizontalAlignment="Left">
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                </TextBlock.Effect>
                </TextBlock>
            </Grid>
        </Border>-->
        <DockPanel Grid.Row="1" MinHeight="345" DataContext="{Binding}" VerticalAlignment="Stretch" LastChildFill="True" HorizontalAlignment="Stretch">
            <shared:AnimatedExpander DockPanel.Dock="Top" Grid.ColumnSpan="2" HorizontalAlignment="Stretch" 
                                     Width="Auto" Height="Auto"
                                     VerticalAlignment="Stretch" Margin="5" IsExpanded="{Binding IsExpanded,Mode=TwoWay}"
                                     IsAutoFocusOnExpandEnabled="True" Header="Filter Settings"
                                     IsAutoExpandOnFocusEnabled="False"
                                     IsAutoCollapseOnBlurEnabled="False" 
                                     Style="{DynamicResource {ComponentResourceKey ResourceId=ExpanderStyleOne, TypeInTargetAssembly={x:Type wpfres:Expanders}}}"
                                     >
                <local:CU_Log_Open_Settings_Control x:Name="viewSettings" VerticalAlignment="Top" HorizontalAlignment="Stretch"/>
            </shared:AnimatedExpander>
            <shared:AnimatedExpander DockPanel.Dock="Top" Grid.ColumnSpan="2" HorizontalAlignment="Stretch" 
                                     Width="Auto" Height="Auto" Header="Decoding Settings" VerticalAlignment="Stretch" Margin="5,0,5,5" 
                                     IsExpanded="{Binding Path=IsDecodeExpanded, Mode=TwoWay}"
                                     Visibility="{Binding Path=IsDecodeVisibility, Mode=TwoWay}"
                                     IsAutoFocusOnExpandEnabled="True" IsAutoExpandOnFocusEnabled="False"
                                     IsAutoCollapseOnBlurEnabled="False" Style="{DynamicResource {ComponentResourceKey ResourceId=ExpanderStyleOne, TypeInTargetAssembly={x:Type wpfres:Expanders}}}"
                                     >
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <RadioButton Grid.Row="0" Grid.Column="0" HorizontalAlignment="Left" IsEnabled="True"
                                 IsChecked="{Binding Path=DecodeBasic, Mode=TwoWay}"
                                 BorderBrush="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:Brushes}, ResourceId=ControlBorderBrush}}"
                                 BorderThickness="4" Margin="5,0,0,0" VerticalAlignment="Center" Padding="5,0,0,0"
                                 Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:RadioButtons}, ResourceId=RadioButtonStyleOne}}"
                                 >
                        <RadioButton.Content>
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Basic" HorizontalAlignment="Left" Margin="0,10,0,5" FontSize="14.667" FontFamily="Tahoma" Opacity="0.65" VerticalAlignment="Center">
                                <TextBlock.Effect>
                                    <DropShadowEffect BlurRadius="4" Opacity="0.2"/>
                                </TextBlock.Effect>
                            </TextBlock>
                        </RadioButton.Content>
                        <RadioButton.Effect>
                            <DropShadowEffect BlurRadius="4" Opacity="0.35"/>
                        </RadioButton.Effect>
                    </RadioButton>
                    <RadioButton Grid.Row="0" Grid.Column="1" HorizontalAlignment="Left" IsEnabled="True"
                                 IsChecked="{Binding Path=DecodeAdvanced, Mode=TwoWay}"
                                 BorderBrush="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:Brushes}, ResourceId=ControlBorderBrush}}"
                                 BorderThickness="4" Margin="5,0,0,0" VerticalAlignment="Center" Padding="5,0,0,0"
                                 Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:RadioButtons}, ResourceId=RadioButtonStyleOne}}"
                                 >
                        <RadioButton.Content>
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Advanced" HorizontalAlignment="Left" Margin="0,10,0,5" FontSize="14.667" FontFamily="Tahoma" Opacity="0.65" VerticalAlignment="Center">
                                <TextBlock.Effect>
                                    <DropShadowEffect BlurRadius="4" Opacity="0.2"/>
                                </TextBlock.Effect>
                            </TextBlock>
                        </RadioButton.Content>
                        <RadioButton.Effect>
                            <DropShadowEffect BlurRadius="4" Opacity="0.35"/>
                        </RadioButton.Effect>
                    </RadioButton>

                    <StackPanel Orientation="Horizontal" Grid.Column="3" HorizontalAlignment="Right" >
                        <CheckBox IsChecked="{Binding Path=ShowRawData}" Margin="30,0" TabIndex="2" VerticalAlignment="Center" Padding="0,0,5,0" 
                                      Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:CheckBoxes}, ResourceId=CheckBoxStyleOne}}"
                                      BorderBrush="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:Brushes}, ResourceId=ControlBorderBrush}}" 
                                      Visibility="{Binding Path=ShowRawData_Visibility, Mode=TwoWay}"
                                      >
                            <CheckBox.Effect>
                                <DropShadowEffect BlurRadius="4" Opacity="0.35"/>
                            </CheckBox.Effect>
                            <CheckBox.Content>
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Show Raw Data" HorizontalAlignment="Left" 
                                           Margin="5,10,0,5" FontSize="14.667" FontFamily="Tahoma" Opacity="0.65" 
                                           VerticalAlignment="Center"
                                           />
                            </CheckBox.Content>
                        </CheckBox>


                        <CheckBox Grid.Column="3" HorizontalAlignment="Right" IsChecked="{Binding Path=IsReverseOrder}"
                                  Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:CheckBoxes}, ResourceId=CheckBoxStyleOne}}"
                                  BorderBrush="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:Brushes}, ResourceId=ControlBorderBrush}}" 
                                  VerticalAlignment="Center" Padding="0,0,10,0"
                                  TabIndex="2">
                            <CheckBox.Effect>
                                <DropShadowEffect BlurRadius="4" Opacity="0.35"/>
                            </CheckBox.Effect>
                            <CheckBox.Content>
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Show Faults in Reverse Order" HorizontalAlignment="Left" 
                                           Margin="5,10,0,5" FontSize="14.667" FontFamily="Tahoma" Opacity="0.65" 
                                           VerticalAlignment="Center"
                                           />
                            </CheckBox.Content>
                        </CheckBox>
                    </StackPanel>
                </Grid>
            </shared:AnimatedExpander>
            <ListView DockPanel.Dock="Top" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                      ScrollViewer.CanContentScroll="True" Margin="5,0,5,10" Name="CULog_List"
                      ItemContainerStyle="{DynamicResource {ComponentResourceKey ResourceId=ListViewItemStyleOne, TypeInTargetAssembly={x:Type wpfres:ListViews}}}"
                      BorderThickness="1" FontFamily="Tahoma"
                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                      ScrollViewer.HorizontalScrollBarVisibility="Auto"
                      Style="{DynamicResource {ComponentResourceKey ResourceId=ListViewStyleOne, TypeInTargetAssembly={x:Type wpfres:ListViews}}}"
                      BorderBrush="{DynamicResource {ComponentResourceKey ResourceId=ControlBorderBrush, TypeInTargetAssembly={x:Type wpfres:Brushes}}}"                      
                      ItemsSource="{Binding Path=CU_Log_List, Mode=OneWay}"
                      SelectedItem="{Binding Path=Selected_CU_Log, Mode=TwoWay}"
                      wpfres:GridViewSort.AutoSort="True"
                      wpfres:GridViewSort.ShowSortGlyph="True"
                      >
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="MouseDoubleClick">
                        <i:InvokeCommandAction Command="{Binding OpenLog_Command}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <ListView.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Save to Folder" Command="{Binding LocalSaveCommand}" />
                    </ContextMenu>
                </ListView.ContextMenu>
                <ListView.View>
                    <GridView AllowsColumnReorder="True"
                              ColumnHeaderContainerStyle="{DynamicResource {ComponentResourceKey ResourceId=GridViewColumnHeaderStyleOne, TypeInTargetAssembly={x:Type wpfres:ListViews}}}">
                        <GridViewColumn Header="Work Order Number" DisplayMemberBinding="{Binding Work_Order}"  Width="150" wpfres:GridViewSort.PropertyName="Work_Order"/>
                        <GridViewColumn Header="PT Serial Number" DisplayMemberBinding="{Binding PT_Serial}"  Width="150" wpfres:GridViewSort.PropertyName="PT_Serial"/>
                        <GridViewColumn Header="Side" DisplayMemberBinding="{Binding Side}"  Width="50" wpfres:GridViewSort.PropertyName="Side"/>
                        <GridViewColumn Header="User" DisplayMemberBinding="{Binding User_Name}" Width="150" wpfres:GridViewSort.PropertyName="User_Name"/>
                        <GridViewColumn Header="Extracted" DisplayMemberBinding="{Binding Date_Time_Extracted}" Width="175" wpfres:GridViewSort.PropertyName="Date_Time_Extracted"/>
                        <GridViewColumn Header="Config" DisplayMemberBinding="{Binding SART_Extraction}" Width="75" wpfres:GridViewSort.PropertyName="SART_Extraction"/>
                    </GridView>
                </ListView.View>
            </ListView>
        </DockPanel>
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Left" Margin="10,0,0,0">
            <TextBlock Text="Count: " FontFamily="Tahoma" FontSize="14" Opacity="0.65">
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                </TextBlock.Effect>
            </TextBlock>
            <TextBlock Text="{Binding Path=Log_Count, Mode=OneWay}" FontFamily="Tahoma" FontSize="14" Opacity="0.65">
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                </TextBlock.Effect>
            </TextBlock>
        </StackPanel>
        <Button Grid.Row="2" HorizontalAlignment="Right" Width="120" Height="30" Content="Open" Command="{Binding OpenLog_Command}"
                Style="{DynamicResource {ComponentResourceKey ResourceId=ButtonStyleOne, TypeInTargetAssembly={x:Type wpfres:Buttons}}}"
                Margin="0,0,5,10" >
            <Button.Effect>
                <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
            </Button.Effect>
        </Button>
    </Grid>
</UserControl>
