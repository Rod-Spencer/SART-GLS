<UserControl x:Class="Segway.Modules.WorkOrder.Work_Order_Configuration_Control"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:plv="clr-namespace:Segway.Modules.Progression_Log_Viewer;assembly=ProgressionLogViewer"
             xmlns:shared="http://schemas.actiprosoftware.com/winfx/xaml/shared"
             xmlns:wpfres="clr-namespace:Segway.WPFResources;assembly=WPFResources"
             xmlns:header="clr-namespace:Segway.Modules.HeaderBar;assembly=HeaderBar"
             xmlns:segway="http://service.segway.com/schemas/"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="1000">
    <!--             xmlns:header="http://service.segway.com/schemas/Header/"       -->

    <UserControl.Resources>
        <shared:ConditionalConverter x:Key="ConditionalConverter" />

        <Style TargetType="TextBlock">
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="Margin" Value="5,5,0,0"/>
            <Setter Property="FontSize" Value="14.667" />
            <Setter Property="FontFamily" Value="Tahoma" />
            <Setter Property="Opacity" Value="0.65" />
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="30" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="50" />
        </Grid.RowDefinitions>

        <header:Header_Bar_Control Grid.Row="0" HeaderText="Configuration Retrieval" Header_FontSize="18" Header_ImageSource="{Binding Header_Image}" />
        <header:Work_Order_Info Grid.Row="1"  Work_Order_Number="{Binding Path=Work_Order_Num, Mode=TwoWay}" 
                                    PT_Serial_Number="{Binding Path=PTSerial,Mode=TwoWay}" 
                                    Work_Order_Color="{Binding Path=WorkOrderColor, Mode=TwoWay}"
                                    />

        <!--
        <Popup Width="Auto" Height="Auto" Grid.Row="2" AllowsTransparency="True" Placement="Center" IsOpen="{Binding Path=PopupIsOpen}" StaysOpen="False">
            <Border BorderBrush="Black" BorderThickness="1" CornerRadius="3" Width="600" Background="{Binding Path=PopupColor, Mode=TwoWay}">
                <TextBlock Margin="20" Text="{Binding Path=PopupMessage, Mode=TwoWay}" FontFamily="Tahoma" FontSize="15" TextWrapping="Wrap" />
            </Border>
        </Popup>
        -->

        <Popup Grid.Row="2" Grid.RowSpan= "1" Grid.Column= "0" Grid.ColumnSpan= "1" Width= "Auto" Height= "Auto" IsOpen= "{Binding Path=PopupIsOpen, Mode=TwoWay}" StaysOpen= "False" Placement= "Center" >
            <Border Width= "1200" Height= "Auto" Background= "{Binding Path=PopupColor, Mode=TwoWay}" BorderBrush= "Black" BorderThickness= "2" CornerRadius= "10" >
                <ScrollViewer HorizontalScrollBarVisibility= "Auto" VerticalScrollBarVisibility= "Auto" >
                    <TextBlock Text= "{Binding Path=PopupMessage, Mode=TwoWay}" FontSize= "16" Margin= "40,25" HorizontalAlignment= "Center"  />
                </ScrollViewer>
            </Border>
        </Popup>


        <Popup x:Name="errorPopup" Grid.Row="2" Grid.RowSpan="2" PopupAnimation="Scroll" MinWidth="400" MinHeight="200" Height="Auto" Width="Auto" AllowsTransparency="False" 
               Placement="Center" IsOpen="{Binding Path=ConfigurationOverridePopupOpen}" StaysOpen="True">
            <Border BorderThickness="1"
                    BorderBrush="{DynamicResource {ComponentResourceKey ResourceId=ControlBorderBrush, TypeInTargetAssembly={x:Type wpfres:Brushes}}}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="40"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="5"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0" Background="{DynamicResource {ComponentResourceKey ResourceId=ToolBar_ItemBrush1, TypeInTargetAssembly={x:Type wpfres:Brushes}}}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="35"/>
                            <ColumnDefinition Width="1*"/>
                        </Grid.ColumnDefinitions>
                        <Rectangle Grid.ColumnSpan="2" Height="16" Fill="Snow" VerticalAlignment="Top" Opacity="0.5"/>
                        <Image Grid.Column="0" Source="../Images/warning.png" Height="25" Width="25" 
                               HorizontalAlignment="Center" VerticalAlignment="Center" >
                            <Image.Effect>
                                <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                            </Image.Effect>
                        </Image>
                        <TextBlock Grid.Column="1" Text="Warning" Foreground="Black"
                                   FontSize="16" 
                                   Opacity="0.65" FontFamily="Tahoma" VerticalAlignment="Center" 
                                   HorizontalAlignment="Left" OpacityMask="Black">
                            <TextBlock.Effect>
                                <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                            </TextBlock.Effect>
                        </TextBlock>
                    </Grid>
                    <Border Grid.Row="1" Grid.RowSpan="4" Background="{DynamicResource {ComponentResourceKey ResourceId=LightBackgroundBrush, TypeInTargetAssembly={x:Type wpfres:Brushes}}}"/>
                    <TextBlock Grid.Row="1" TextWrapping="Wrap" Text="{Binding Path=ConfigurationOverrideMessage}" HorizontalAlignment="Left" Margin="5,5,5,0" FontSize="14.667" FontFamily="Tahoma" Opacity="0.60" VerticalAlignment="Top">
                        <!--<TextBlock.Effect>
                            <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                        </TextBlock.Effect>-->
                    </TextBlock>
                    <!--<TextBlock Grid.Row="3" TextWrapping="Wrap" Text="Do you want to set an override?" HorizontalAlignment="Center" Margin="5,5,5,0" FontSize="14.667" FontFamily="Tahoma" Opacity="0.60" VerticalAlignment="Top"/>-->
                    <Grid Grid.Row="4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="1" HorizontalAlignment="Right" Width="120" Height="30" Content="Yes" Command="{Binding YesCommand}"
                                Style="{DynamicResource {ComponentResourceKey ResourceId=ButtonStyleOne, TypeInTargetAssembly={x:Type wpfres:Buttons}}}"
                                Margin="0,5,5,10" Visibility="Visible">
                            <Button.Effect>
                                <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                            </Button.Effect>
                        </Button>
                        <Button Grid.Column="2" HorizontalAlignment="Right" Width="120" Height="30" Content="No" Command="{Binding NoCommand}"
                                Style="{DynamicResource {ComponentResourceKey ResourceId=ButtonStyleOne, TypeInTargetAssembly={x:Type wpfres:Buttons}}}"
                                Margin="0,5,5,10" Visibility="Visible">
                            <Button.Effect>
                                <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                            </Button.Effect>
                        </Button>
                    </Grid>
                </Grid>
            </Border>
        </Popup>

        <Grid Grid.Row="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="5" />
                <RowDefinition Height="35" />
                <RowDefinition Height="35" />
                <RowDefinition Height="35" />
                <RowDefinition Height="35" Name="RightMotorRow" />
                <RowDefinition Height="5" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="100" />
                <ColumnDefinition Width="5*" />
                <ColumnDefinition Width="5*" />
                <ColumnDefinition Width="30" />
                <ColumnDefinition Width="120" />
                <ColumnDefinition Width="9*" />
                <ColumnDefinition Width="10" />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Row="1" Grid.Column="1" Text="CU - A / B" >
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                </TextBlock.Effect>
            </TextBlock>
            <TextBox Height="30" BorderThickness="2" Grid.Row="1" Grid.Column="2" TabIndex="1" HorizontalContentAlignment="Center" 
                     Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:TextBoxes}, ResourceId=TextBoxStyleOne}}"                         
                     Text="{Binding Path=CUA_Serial, Mode=TwoWay}" IsReadOnly="True" Background="#FFD0F8FF" Margin="0,2,2,2"
                     BorderBrush="{Binding Path=CUA_Serial_Border, Mode=TwoWay}" ToolTip="Auto-detected CU-A serial number."
                     Name="CUABox" GotFocus="TextBox_GotFocus"  >
                <TextBox.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Clear" Command="{Binding ClearCUACommand}" />
                        <MenuItem Header="Blank" Command="{Binding BlankCUACommand}" />
                    </ContextMenu>
                </TextBox.ContextMenu>
                <TextBox.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </TextBox.Effect>
            </TextBox>
            <Popup Name="CUAPopup" PopupAnimation="Scroll" Width="Auto" Height="Auto" Grid.Row="1" Grid.Column="2" AllowsTransparency="True" 
                   PlacementTarget="{Binding ElementName=CUABox}" Placement="Top" IsOpen="{Binding Path=CUA_Serial_Popup_Open}" StaysOpen="False">
                <Border BorderBrush="Black" BorderThickness="1" CornerRadius="3">
                    <StackPanel Orientation="Vertical" Background="LightGoldenrodYellow">
                        <TextBlock Margin="5,5,5,5" Name="Line1Text" Text="The CU-A serial number does not match Segway records." FontFamily="Tahoma" FontSize="15" />
                        <TextBlock Margin="5,0,5,5" Name="Line2Text" Text="Contact your Segway Service Center." FontFamily="Tahoma" FontSize="15" />
                    </StackPanel>
                </Border>
            </Popup>
            <TextBox Height="30" BorderThickness="2" Grid.Row="1" Grid.Column="3" TabIndex="1" HorizontalContentAlignment="Center" 
                     Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:TextBoxes}, ResourceId=TextBoxStyleOne}}"                         
                     Text="{Binding Path=CUB_Serial, Mode=TwoWay}" IsReadOnly="True" Background="#FFD0F8FF" Margin="2,2,0,2"
                     BorderBrush="{Binding Path=CUB_Serial_Border, Mode=TwoWay}" ToolTip="Auto-detected CU-B serial number."
                     Name="CUBBox" GotFocus="TextBox_GotFocus">
                <TextBox.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Clear" Command="{Binding ClearCUBCommand}" />
                        <MenuItem Header="Blank" Command="{Binding BlankCUBCommand}" />
                    </ContextMenu>
                </TextBox.ContextMenu>
                <TextBox.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </TextBox.Effect>
            </TextBox>
            <Popup Name="CUBPopup" PopupAnimation="Scroll" Width="Auto" Height="Auto" Grid.Row="1" Grid.Column="3" AllowsTransparency="True" 
                   PlacementTarget="{Binding ElementName=CUBBox}" Placement="Right" IsOpen="{Binding Path=CUB_Serial_Popup_Open}" StaysOpen="False">
                <Border BorderBrush="Black" BorderThickness="1" CornerRadius="3">
                    <StackPanel Orientation="Vertical" Background="LightGoldenrodYellow">
                        <TextBlock Margin="5,5,5,5" Text="The CU-B serial number does not match Segway records." FontFamily="Tahoma" FontSize="15" />
                        <TextBlock Margin="5,0,5,5" Text="Contact your Segway Service Center." FontFamily="Tahoma" FontSize="15" />
                    </StackPanel>
                </Border>
            </Popup>

            <TextBlock Grid.Row="2" Grid.Column="1" Text="BSA - A / B" >
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                </TextBlock.Effect>
            </TextBlock>
            <TextBox Height="30" BorderThickness="2" Grid.Row="2" Grid.Column="2" TabIndex="1" HorizontalContentAlignment="Center" 
                     Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:TextBoxes}, ResourceId=TextBoxStyleOne}}"                         
                     Text="{Binding Path=BSA_A_Serial, Mode=TwoWay}" IsReadOnly="True" Background="#FFD0F8FF" Margin="0,2,2,2"
                     BorderBrush="{Binding Path=BSA_A_Serial_Border, Mode=TwoWay}" ToolTip="Auto-detected BSA-A serial number."
                     Name="BSA_A_Box" GotFocus="TextBox_GotFocus">
                <TextBox.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Clear" Command="{Binding ClearBSAACommand}" />
                        <MenuItem Header="Blank" Command="{Binding BlankBSAACommand}" />
                    </ContextMenu>
                </TextBox.ContextMenu>
                <TextBox.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </TextBox.Effect>
            </TextBox>
            <Popup Name="BSA_A_Popup" PopupAnimation="Scroll" Width="Auto" Height="Auto" Grid.Row="2" Grid.Column="2" AllowsTransparency="True" 
                   PlacementTarget="{Binding ElementName=BSA_A_Box}" Placement="Left" IsOpen="{Binding Path=BSA_A_Serial_Popup_Open}" StaysOpen="False">
                <Border BorderBrush="Black" BorderThickness="1" CornerRadius="3">
                    <StackPanel Orientation="Vertical" Background="LightGoldenrodYellow">
                        <TextBlock Margin="5,5,5,5" Text="The BSA-A serial number does not match Segway records." FontFamily="Tahoma" FontSize="15" />
                        <TextBlock Margin="5,0,5,5" Text="Contact your Segway Service Center." FontFamily="Tahoma" FontSize="15" />
                    </StackPanel>
                </Border>
            </Popup>
            <TextBox Height="30" BorderThickness="2" Grid.Row="2" Grid.Column="3" TabIndex="1" HorizontalContentAlignment="Center" 
                     Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:TextBoxes}, ResourceId=TextBoxStyleOne}}"                         
                     Text="{Binding Path=BSA_B_Serial, Mode=TwoWay}" IsReadOnly="True" Background="#FFD0F8FF" Margin="2,2,0,2"
                     BorderBrush="{Binding Path=BSA_B_Serial_Border, Mode=TwoWay}" ToolTip="Auto-detected BSA-B serial number."
                     Name="BSA_B_Box" GotFocus="TextBox_GotFocus">
                <TextBox.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Clear" Command="{Binding ClearBSABCommand}" />
                        <MenuItem Header="Blank" Command="{Binding BlankBSABCommand}" />
                    </ContextMenu>
                </TextBox.ContextMenu>
                <TextBox.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </TextBox.Effect>
            </TextBox>
            <Popup Name="BSA_B_Popup" PopupAnimation="Scroll" Width="Auto" Height="Auto" Grid.Row="2" Grid.Column="3" AllowsTransparency="True" 
                   PlacementTarget="{Binding ElementName=BSA_B_Box}" Placement="Right" IsOpen="{Binding Path=BSA_B_Serial_Popup_Open}" StaysOpen="False">
                <Border BorderBrush="Black" BorderThickness="1" CornerRadius="3">
                    <StackPanel Orientation="Vertical" Background="LightGoldenrodYellow">
                        <TextBlock Margin="5,5,5,5" Text="The BSA-B serial number does not match Segway records." FontFamily="Tahoma" FontSize="15" />
                        <TextBlock Margin="5,0,5,5" Text="Contact your Segway Service Center." FontFamily="Tahoma" FontSize="15" />
                    </StackPanel>
                </Border>
            </Popup>
            <TextBlock Grid.Row="2" Grid.Column="5" Text="Pivot Assembly" >
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                </TextBlock.Effect>
            </TextBlock>
            <TextBox Height="30" BorderThickness="2" Grid.Row="2" Grid.Column="6" TabIndex="1" HorizontalContentAlignment="Center" 
                     Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:TextBoxes}, ResourceId=TextBoxStyleOne}}"                         
                     Text="{Binding Path=Pivot_Serial, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="0,2" 
                     Background="LightGoldenrodYellow" Name="PivotSerialBox" TextChanged="TextBox_TextChanged"
                     BorderBrush="{Binding Path=Pivot_Serial_Border, Mode=TwoWay}" 
                     ToolTip="Entering Pivot Assembly serial number is optional."
                     wpfres:TextBoxExtendedProperties.IsFocused="{Binding IsPivotSerialFocused}"
                     >
                <TextBox.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Clear" Command="{Binding ClearPivotCommand}" />
                    </ContextMenu>
                </TextBox.ContextMenu>
                <TextBox.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </TextBox.Effect>
            </TextBox>
            <Popup Name="Pivot_Serial_Popup" PopupAnimation="Scroll" Width="Auto" Height="Auto" Grid.Row="2" Grid.Column="6" AllowsTransparency="True" 
                   PlacementTarget="{Binding ElementName=PivotSerialBox}" Placement="Bottom" IsOpen="{Binding Path=Pivot_Serial_Popup_Open}" StaysOpen="False">
                <Border BorderBrush="Black" BorderThickness="1" CornerRadius="3">
                    <StackPanel Orientation="Vertical" Background="LightGoldenrodYellow">
                        <TextBlock Margin="5,5,5,5" Text="The Pivot Assembly serial number does not match Segway records." FontFamily="Tahoma" FontSize="15" />
                        <TextBlock Margin="5,0,5,5" Text="Contact your Segway Service Center." FontFamily="Tahoma" FontSize="15" />
                    </StackPanel>
                </Border>
            </Popup>

            <TextBlock Grid.Row="3" Grid.Column="1" Text="UI-SID" Margin="5,5,0,0">
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                </TextBlock.Effect>
            </TextBlock>
            <TextBox Height="30" BorderThickness="2" Grid.Row="3" Grid.Column="2" TabIndex="1" HorizontalContentAlignment="Center" 
                     Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:TextBoxes}, ResourceId=TextBoxStyleOne}}"                         
                     Text="{Binding Path=UIC_SID, Mode=TwoWay}" IsReadOnly="True" Background="#FFD0F8FF" Grid.ColumnSpan="2" Margin="0,2"
                     BorderBrush="{Binding Path=UIC_SID_Border, Mode=TwoWay}" ToolTip="Auto-detected UI-SID value."
                     Name="UI_SID_Box" GotFocus="TextBox_GotFocus">
                <TextBox.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Clear" Command="{Binding ClearUISIDCommand}" />
                        <MenuItem Header="Blank" Command="{Binding BlankUISIDCommand}" />
                    </ContextMenu>
                </TextBox.ContextMenu>
                <TextBox.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </TextBox.Effect>
            </TextBox>
            <Popup Name="UI_SID_Popup" PopupAnimation="Scroll" Width="Auto" Height="Auto" Grid.Row="3" Grid.Column="2" Grid.ColumnSpan="2" 
                   AllowsTransparency="True" PlacementTarget="{Binding ElementName=UI_SID_Box}" Placement="Bottom" 
                   IsOpen="{Binding Path=UIC_SID_Popup_Open}" StaysOpen="False"
                   >
                <Border BorderBrush="Black" BorderThickness="1" CornerRadius="3">
                    <StackPanel Orientation="Vertical" Background="LightGoldenrodYellow">
                        <TextBlock Margin="5,5,5,5" Text="The UI-SID value does not match Segway records." FontFamily="Tahoma" FontSize="15" />
                        <TextBlock Margin="5,0,5,5" Text="Contact your Segway Service Center." FontFamily="Tahoma" FontSize="15" />
                    </StackPanel>
                </Border>
            </Popup>

            <TextBlock Grid.Row="3" Grid.Column="5" Text="Left Motor" Visibility="{Binding MotorLeft_Visibility}">
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                </TextBlock.Effect>
            </TextBlock>
            <TextBox Height="30" BorderThickness="2" Grid.Row="3" Grid.Column="6" TabIndex="1" HorizontalContentAlignment="Center" 
                     Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:TextBoxes}, ResourceId=TextBoxStyleOne}}"                         
                     Text="{Binding Path=MotorLeft_Serial, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                     Margin="0,2" Background="LightGoldenrodYellow" Name="MotorLeft_Serial_Box" TextChanged="TextBox_TextChanged"
                     BorderBrush="{Binding Path=MotorLeft_Serial_Border, Mode=TwoWay}" Visibility="{Binding MotorLeft_Visibility}"
                     >
                <TextBox.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Clear" Command="{Binding ClearMotorLCommand}" />
                    </ContextMenu>
                </TextBox.ContextMenu>
                <TextBox.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </TextBox.Effect>
            </TextBox>
            <Popup Name="MotorLeft_Serial_Popup" PopupAnimation="Scroll" Width="Auto" Height="Auto" Grid.Row="3" Grid.Column="6" AllowsTransparency="True" 
                   PlacementTarget="{Binding ElementName=MotorLeft_Serial_Box}" Placement="Right" IsOpen="{Binding Path=MotorLeft_Serial_Popup_Open}" StaysOpen="False">
                <Border BorderBrush="Black" BorderThickness="1" CornerRadius="3">
                    <StackPanel Orientation="Vertical" Background="LightGoldenrodYellow">
                        <TextBlock Margin="5,5,5,5" Text="The Left Motor serial number does not match Segway records." FontFamily="Tahoma" FontSize="15" />
                        <TextBlock Margin="5,0,5,5" Text="Contact your Segway Service Center." FontFamily="Tahoma" FontSize="15" />
                    </StackPanel>
                </Border>
            </Popup>

            <TextBlock Grid.Row="4" Grid.Column="5" Text="Right Motor" Visibility="{Binding MotorRight_Visibility}">
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                </TextBlock.Effect>
            </TextBlock>
            <TextBox Height="30" BorderThickness="2" Grid.Row="4" Grid.Column="6" TabIndex="1" HorizontalContentAlignment="Center" 
                     Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:TextBoxes}, ResourceId=TextBoxStyleOne}}"                         
                     Text="{Binding Path=MotorRight_Serial, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                     Margin="0,2" Background="LightGoldenrodYellow" Name="MotorRight_Serial_Box" TextChanged="TextBox_TextChanged"
                     BorderBrush="{Binding Path=MotorRight_Serial_Border, Mode=TwoWay}" Visibility="{Binding MotorRight_Visibility}"
                     >
                <TextBox.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Clear" Command="{Binding ClearMotorRCommand}" />
                    </ContextMenu>
                </TextBox.ContextMenu>
                <TextBox.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </TextBox.Effect>
            </TextBox>
            <Popup Name="MotorRight_Serial_Popup" PopupAnimation="Scroll" Width="Auto" Height="Auto" Grid.Row="4" Grid.Column="6" AllowsTransparency="True" 
                   PlacementTarget="{Binding ElementName=MotorRight_Serial_Box}" Placement="Bottom" IsOpen="{Binding Path=MotorRight_Serial_Popup_Open}" StaysOpen="False">
                <Border BorderBrush="Black" BorderThickness="1" CornerRadius="3">
                    <StackPanel Orientation="Vertical" Background="LightGoldenrodYellow">
                        <TextBlock Margin="5,5,5,5" Text="The Right Motor serial number does not match Segway records." FontFamily="Tahoma" FontSize="15" />
                        <TextBlock Margin="5,0,5,5" Text="Contact your Segway Service Center." FontFamily="Tahoma" FontSize="15" />
                    </StackPanel>
                </Border>
            </Popup>

            <TextBlock Grid.Row="1" Grid.Column="5" Text="UIC Serial" Visibility="{Binding Path=UIC_Serial_Visibility, Mode=TwoWay}">
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.5"/>
                </TextBlock.Effect>
            </TextBlock>
            <TextBox Height="30" BorderThickness="2" Grid.Row="1" Grid.Column="6" TabIndex="1" HorizontalContentAlignment="Center" 
                     Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:TextBoxes}, ResourceId=TextBoxStyleOne}}"                         
                     Text="{Binding Path=UIC_Serial, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                     Margin="0,2" Visibility="{Binding Path=UIC_Serial_Visibility, Mode=TwoWay}"
                     ToolTip="UIC Serial Number must be scanned or typed in." Name="UICSerialBox"
                     BorderBrush="{Binding Path=UIC_Serial_Border, Mode=TwoWay}"
                     >
                <TextBox.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Clear" Command="{Binding ClearUICSerialCommand}" />
                    </ContextMenu>
                </TextBox.ContextMenu>
                <TextBox.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </TextBox.Effect>
            </TextBox>
            <Popup Name="UIC_Serial_Popup" PopupAnimation="Scroll" Width="Auto" Height="Auto" Grid.Row="1" Grid.Column="6" AllowsTransparency="True" 
                   PlacementTarget="{Binding ElementName=UICSerialBox}" Placement="Top" IsOpen="{Binding Path=UIC_Serial_Popup_Open}" StaysOpen="False">
                <Border BorderBrush="Black" BorderThickness="1" CornerRadius="3">
                    <StackPanel Orientation="Vertical" Background="LightGoldenrodYellow">
                        <TextBlock Margin="5,5,5,5" Text="The UIC serial number does not match Segway records." FontFamily="Tahoma" FontSize="15" />
                        <TextBlock Margin="5,0,5,5" Text="Contact your Segway Service Center." FontFamily="Tahoma" FontSize="15" />
                    </StackPanel>
                </Border>
            </Popup>

            <!--For testing purposes only, delete when no longer needed -->
            <!--<Button Grid.Row="4" Grid.Column="1" Name="TestPopButton" Content="Test Popup" Click="TestPopButton_Click" />-->

        </Grid>
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="10" />
            </Grid.ColumnDefinitions>
            <plv:ProgressionLogViewer Visibility="Visible" Grid.Column="1" />

        </Grid>
        <StackPanel Orientation="Horizontal" Grid.Row="4" HorizontalAlignment="Left" Margin="10,0" >
            <Button Content="Return" Width="150" Height="30" Command="{Binding ReturnCommand}"
                    Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:Buttons}, ResourceId=ButtonStyleOne}}"
                    HorizontalAlignment="Right" Margin="0,5,10,10" TabIndex="8" IsDefault="True" ToolTip="Return to Work Order summary without saving data.">
                <Button.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </Button.Effect>
            </Button>

            <Button Content="Save Data" Width="150" Height="30" Command="{Binding AuthorizeCommand}"
                    Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:Buttons}, ResourceId=ButtonStyleOne}}"
                    HorizontalAlignment="Right" Margin="0,5,10,10" TabIndex="8" IsDefault="True" ToolTip="Extracted data must be saved to continue work on this work order.">
                <Button.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </Button.Effect>
            </Button>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Grid.Row="4" HorizontalAlignment="Center" Margin="10,0" >
            <Button Content="Clear" Width="150" Height="30" Command="{Binding ClearCommand}"
                    Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:Buttons}, ResourceId=ButtonStyleOne}}"
                    HorizontalAlignment="Right" Margin="0,5,10,10" TabIndex="8" IsDefault="True" ToolTip="Clear all electronically retrieved data.">
                <Button.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </Button.Effect>
            </Button>

        </StackPanel>

        <StackPanel Orientation="Horizontal" Grid.Row="4" HorizontalAlignment="Right" Margin="10,0" >
            <Button Content="Cancel" Width="150" Height="30" Command="{Binding CancelCommand}" IsDefault="True"
                    Visibility="{Binding Path=CancelVisibility, Mode=TwoWay}" HorizontalAlignment="Right" TabIndex="8" 
                    Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:Buttons}, ResourceId=ButtonStyleOne}}"
                    ToolTip="Cancel current configuration extraction.">
                <Button.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </Button.Effect>
            </Button>

            <Button Content="Retrieve Configuration" Width="150" Height="30" Command="{Binding RetrieveCommand}"
                            Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type wpfres:Buttons}, ResourceId=ButtonStyleOne}}"
                            HorizontalAlignment="Right" TabIndex="8" IsDefault="True" Visibility="{Binding Path=RetrieveVisibility, Mode=TwoWay}"
                            ToolTip="Retrieve configuration data from the PT.">
                <Button.Effect>
                    <DropShadowEffect BlurRadius="4" Opacity="0.4"/>
                </Button.Effect>
            </Button>
        </StackPanel>
    </Grid>
</UserControl>
